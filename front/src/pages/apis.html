<template>
  <require from="./apis.css"></require>
  <!--<require from="~animate.css/animate.css"></require>-->
  <require from="./apis/MethodIcon"></require>
  <require from="./apis/card-api"></require>
  <div class="apis-page">
    <md-card md-title="Api rest">
      <div class="row">
        <div class="col s6 offset-s1">
          <input type="text" value.bind="filter" keyup.trigger="filtering() & debounce:100"
                 class="form-control" id="filter" placeholder="Filtre">
        </div>
        <div class="col s4 offset-s1">
          Affichage :
          <md-switch md-label-on="Tables" md-label-off="Cards" md-checked.bind="viewTable"></md-switch>
        </div>
      </div>

      <div class="row">
        <div class="col s6 offset-s1">
          <strong>Nombre de résultat : ${datas.length}</strong>
        </div>
        <div class="col s5">
          <button if.bind="!filtersPanel" click.trigger="showOrHideFilterPanel()" md-button="flat:true"
                  class="valign-wrapper primary-text" style="font-size: 1.3rem;">
            <i class="material-icons left">add_circle</i>&nbsp;Filtres
          </button>
          <button if.bind="filtersPanel" click.trigger="showOrHideFilterPanel()" md-button="flat:true"
                  class="valign-wrapper primary-text" style="font-size: 1.3rem;">
            <i class="material-icons left">close</i>&nbsp;Masquer les filtres
          </button>
        </div>
      </div>
      <div if.bind="filtersPanel" class="row filters-panel">
        <div class="col s4">
          <select md-select="label: Méthode" value.two-way="subFilters.method" change.delegate="filtering() & debounce:100">
            <option></option>
            <option value="GET">GET</option>
            <option value="POST">POST</option>
            <option value="PUT">PUT</option>
            <option value="DELETE">DELETE</option>
            <option value="HEAD">HEAD</option>
          </select>
        </div>
        <div class="col s4">
          <md-input md-label="Path" md-value.bind="subFilters.path" keyup.delegate="filtering() & debounce:100"></md-input>
        </div>
        <div class="col s4">
          <md-input md-label="Domaine" md-value.bind="subFilters.domain" keyup.delegate="filtering() & debounce:100"></md-input>
        </div>
      </div>
    </md-card>
    <div class="divider"></div>
    <div class="card-container" if.bind="!viewTable">
      <card-api repeat.for="api of datas" api.bind="api"></card-api>
    </div>
    <md-card if.bind="viewTable">
      <table class="table-result highlight">
        <thead>
        <tr>
          <th>Méthode</th>
          <th>path</th>
          <th>Commentaire</th>
        </tr>
        </thead>

        <tbody>
        <tr repeat.for="api of datas">
          <td>
            <method-icon method.bind="api.method"></method-icon>
          </td>
          <td class="api-url">
            ${api.absolutePath}
          </td>
          <td class="api-comment">${api.comment}</td>
        </tr>
        <tr show.bind="datas.length === 0">
          <td colspan="3"><p>Aucune Api correspondante.</p></td>
        </tr>
        </tbody>
      </table>
    </md-card>
  </div>
</template>
